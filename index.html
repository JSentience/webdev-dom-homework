<!DOCTYPE html>
<html>
<head>
  <title>Проект "Комменты"</title>
  <meta charset="utf-8"/>
  <link
      rel="stylesheet"
      href="styles.css"/>
</head>

<body>
<div class="container">
  <ul class="comments">
    <li class="comment">
      
      <div class="comment-header">
        <div>Глеб Фокин</div>
        <div>12.02.22 12:18</div>
      </div>
      <div class="comment-body">
        <div class="comment-text">
          Это будет первый комментарий на этой странице
        </div>
      </div>
      <div class="comment-footer">
        <div class="likes">
          <span class="likes-counter">3</span>
          <button class="like-button"></button>
        </div>
      </div>
    </li>
    <li class="comment">
      <div class="comment-header">
        <div>Варвара Н.</div>
        <div>13.02.22 19:22</div>
      </div>
      <div class="comment-body">
        <div class="comment-text">
          Мне нравится как оформлена эта страница! ❤
        </div>
      </div>
      <div class="comment-footer">
        <div class="likes">
          <span class="likes-counter">75</span>
          <button class="like-button -active-like"></button>
        </div>
      </div>
    </li>
  </ul>
  <div class="add-form">
    <input
        type="text"
        class="add-form-name"
        placeholder="Введите ваше имя"
        required
    />
    <textarea
        type="textarea"
        class="add-form-text"
        placeholder="Введите ваш комментарий"
        rows="4"
        required
    ></textarea>
    <div class="add-form-row">
      <button class="add-form-button">Написать</button>
    </div>
  </div>
</div>
</body>

<script>
  'use strict';
  // Код писать здесь
  const addName = document.querySelector('.add-form-name');
  const addComment = document.querySelector('.add-form-text');
  const addButton = document.querySelector('.add-form-button');
  const commentsBlock = document.querySelector('.comments');
  
  //  Получение даты
  let date = new Date();
  const initDate =
      `${date.getDate().toString().padStart(2, '0')}.${(date.getMonth() +
          1).toString().padStart(2, '0')}.${date.getFullYear().
          toString().
          slice(-2)} ${date.getHours().
          toString().
          padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`;
  //  console.log(initDate);
  
  //  Добавление комментария по клику
  addButton.addEventListener('click', () => {
    const name = addName.value.trim();
    const comment = addComment.value.trim();
    addName.classList.remove('error');
    addComment.classList.remove('error');
    if (!name) {
      return addName.classList.add('error');
    }
    if (!comment) {
      return addComment.classList.add('error');
    }
    commentsBlock.insertAdjacentHTML('beforeend', `<li class="comment">
  <div class="comment-header">
    <div>${name}</div>
    <div>${initDate}</div>
  </div>
  <div class="comment-body">
    <div class="comment-text">
      ${comment}
    </div>
  </div>
  <div class="comment-footer">
    <div class="likes">
      <span class="likes-counter">0</span>
      <button class="like-button"></button>
    </div>
  </div>
</li>`);
    
    addName.value = '';
    addComment.value = '';
//    console.log(name, comment);
    
  });
  
  //  Увеличение числа лайков по клику
  commentsBlock.addEventListener('click', (event) => {
    if (event.target.classList.contains('like-button')) {
      const likeButton = event.target;
      const likesCounter = likeButton.closest('.likes').
          querySelector('.likes-counter');
      
      let currentCount = +likesCounter.textContent;
      currentCount++;
      likesCounter.textContent = currentCount;
      
      likeButton.classList.add('-active-like');

//      console.log(likesCounter);
    }
    
  });
  
  console.log('It works!');
</script>
</html>
